<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Multi-Language Translation Table</title>

  <link rel="stylesheet" href="style.css">
  <style>
    table {
    border-collapse: collapse;
    width: 100%;
    margin-top: 20px;
    table-layout: auto; /* ÙŠØ³Ù…Ø­ Ù„Ù„Ø£Ø¹Ù…Ø¯Ø© Ø¨Ø§Ù„ØªÙƒÙŠÙ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ */
  }

  th, td {
    border: 1px solid #ccc;
    padding: 8px;
    text-align: left;
    white-space: nowrap;       /* Ù…Ù†Ø¹ ÙƒØ³Ø± Ø§Ù„Ø³Ø·Ø± Ø¯Ø§Ø®Ù„ Ø§Ù„Ø®Ù„ÙŠØ© */
    overflow: hidden;
    text-overflow: ellipsis;   /* Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù†Ù‚Ø§Ø· Ø¹Ù†Ø¯ ØªØ¬Ø§ÙˆØ² Ø§Ù„Ù†Øµ */
  }

  th:first-child,
  td:first-child {
    width: 1%;               /* Ø£ØµØºØ± Ø¹Ø±Ø¶ Ù…Ù…ÙƒÙ† Ù„Ù„Ø¹Ù…ÙˆØ¯ */
    white-space: nowrap;
    text-align: center;
  }

  </style>
</head>
<body>
  <div class="container">
    <button onclick="location.href='index.html'">ğŸ”™ Back to the homepage</button>

    <h2>Translation Table</h2>

    <label>Select Topic:</label>
    <select id="topicDropdown"><option value="">--Select--</option></select>

    <label>Select Level:</label>
    <select id="levelDropdown" disabled><option value="">--Select--</option></select>

    <label>Select Your Language:</label>
    <select id="fromLangDropdown"><option value="">--Select--</option></select>

    <label>Select Translation Language 1 (required):</label>
    <select id="toLangDropdown1"><option value="">--Select--</option></select>

    <label>Select Translation Language 2 (optional):</label>
    <select id="toLangDropdown2"><option value="">--Select--</option></select>

    <label>Select Translation Language 3 (optional):</label>
    <select id="toLangDropdown3"><option value="">--Select--</option></select>

    <label>Select Translation Language 4 (optional):</label>
    <select id="toLangDropdown4"><option value="">--Select--</option></select>

    <button id="showTableBtn" disabled>Show Table</button>

    <table id="translationTable" style="display:none;">
      <thead>
        <tr id="tableHeadRow">
          <th>#</th>
          <th>Hide</th>
          <th>Word (Your Language)</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <script>
    let jsonData = {};
    let selectedTopic = '';
    let selectedLevel = '';
    let availableLanguages = [];

    const topicDropdown = document.getElementById('topicDropdown');
    const levelDropdown = document.getElementById('levelDropdown');
    const fromLangDropdown = document.getElementById('fromLangDropdown');
    const toLangDropdown1 = document.getElementById('toLangDropdown1');
    const toLangDropdown2 = document.getElementById('toLangDropdown2');
    const toLangDropdown3 = document.getElementById('toLangDropdown3');
    const toLangDropdown4 = document.getElementById('toLangDropdown4');
    const showTableBtn = document.getElementById('showTableBtn');

    // ØªØ­Ù…ÙŠÙ„ Ù…Ù„Ù JSON
    fetch('vocab-l.json')
      .then(res => res.json())
      .then(data => {
        jsonData = data;
        for (const topic in data) {
          const opt = document.createElement('option');
          opt.value = topic;
          opt.textContent = topic;
          topicDropdown.appendChild(opt);
        }
      });

    // Ø¹Ù†Ø¯ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹
    topicDropdown.addEventListener('change', function () {
      selectedTopic = this.value;
      levelDropdown.innerHTML = '<option value="">--Select--</option>';
      levelDropdown.disabled = true;

      const dropdowns = [fromLangDropdown, toLangDropdown1, toLangDropdown2, toLangDropdown3, toLangDropdown4];
      dropdowns.forEach(dropdown => dropdown.innerHTML = '<option value="">--Select--</option>');
      showTableBtn.disabled = true;

      if (!selectedTopic) return;

      // ØªØ¹Ø¨Ø¦Ø© Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª (A / B / C)
      const levels = Object.keys(jsonData[selectedTopic]);
      levels.forEach(level => {
        const opt = document.createElement('option');
        opt.value = level;
        opt.textContent = level;
        levelDropdown.appendChild(opt);
      });

      levelDropdown.disabled = false;
    });

    // Ø¹Ù†Ø¯ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø³ØªÙˆÙ‰
    levelDropdown.addEventListener('change', function () {
      selectedLevel = this.value;

      const dropdowns = [fromLangDropdown, toLangDropdown1, toLangDropdown2, toLangDropdown3, toLangDropdown4];
      dropdowns.forEach(dropdown => dropdown.innerHTML = '<option value="">--Select--</option>');
      showTableBtn.disabled = true;

      if (!selectedLevel) return;

      const firstEntry = Object.values(jsonData[selectedTopic][selectedLevel])[0];
      availableLanguages = Object.keys(firstEntry).concat("english");

      dropdowns.forEach(dropdown => {
        availableLanguages.forEach(lang => {
          const opt = document.createElement('option');
          opt.value = lang;
          opt.textContent = lang;
          dropdown.appendChild(opt.cloneNode(true));
        });
      });
    });

    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø²Ø±
    function checkEnable() {
      if (topicDropdown.value && levelDropdown.value && fromLangDropdown.value && toLangDropdown1.value) {
        showTableBtn.disabled = false;
      } else {
        showTableBtn.disabled = true;
      }
    }

    fromLangDropdown.addEventListener('change', checkEnable);
    toLangDropdown1.addEventListener('change', checkEnable);

    // Ø¹Ø±Ø¶ Ø§Ù„Ø¬Ø¯ÙˆÙ„
    showTableBtn.addEventListener('click', function () {
      const fromLang = fromLangDropdown.value;
      const toLangs = [
        toLangDropdown1.value,
        toLangDropdown2.value,
        toLangDropdown3.value,
        toLangDropdown4.value
      ].filter(Boolean);

      const table = document.getElementById('translationTable');
      const tableHeadRow = document.getElementById('tableHeadRow');
      const tableBody = document.querySelector('#translationTable tbody');

      tableHeadRow.innerHTML = '<th>#</th><th>Hide</th><th>Word (Your Language)</th>';
      tableBody.innerHTML = '';

      toLangs.forEach(lang => {
        const th = document.createElement('th');
        th.textContent = `Translation (${lang})`;
        tableHeadRow.appendChild(th);
      });

      const words = jsonData[selectedTopic][selectedLevel];
      let counter = 1;

      for (const [englishWord, translations] of Object.entries(words)) {
        const fromWord = (fromLang === 'english') ? englishWord : translations[fromLang] || '-';

        const row = document.createElement('tr');

        // Ø±Ù‚Ù… Ø§Ù„ÙƒÙ„Ù…Ø©
        const numCell = document.createElement('td');
        numCell.textContent = counter++;
        row.appendChild(numCell);

        // Ø²Ø± Ø§Ù„Ø¥Ø®ÙØ§Ø¡
        const toggleCell = document.createElement('td');
        const toggleBtn = document.createElement('button');
        toggleBtn.textContent = 'âˆ’';
        toggleBtn.className = 'toggle-row-btn';
        toggleCell.appendChild(toggleBtn);
        row.appendChild(toggleCell);

        // Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„Ø£ØµÙ„ÙŠØ©
        const fromCell = document.createElement('td');
        fromCell.textContent = fromWord;
        row.appendChild(fromCell);

        // Ø§Ù„ØªØ±Ø¬Ù…Ø§Øª
        toLangs.forEach(lang => {
          const cell = document.createElement('td');
          const toWord = (lang === 'english') ? englishWord : translations[lang] || '-';
          cell.textContent = toWord;
          row.appendChild(cell);
        });

        tableBody.appendChild(row);

        // Ø­Ø¯Ø« Ø§Ù„Ø¥Ø®ÙØ§Ø¡/Ø§Ù„Ø¥Ø¸Ù‡Ø§Ø±
        toggleBtn.addEventListener('click', function () {
          const placeholderRow = document.createElement('tr');
          const placeholderCell = document.createElement('td');
          placeholderCell.colSpan = toLangs.length + 3; // +3 Ù„Ø£Ù†Ù†Ø§ Ø£Ø¶ÙÙ†Ø§ Ø±Ù‚Ù… Ùˆ Ø²Ø±
          const showBtn = document.createElement('button');
          showBtn.textContent = '+';
          showBtn.className = 'toggle-row-btn';
          showBtn.addEventListener('click', function () {
            row.style.display = '';
            placeholderRow.remove();
          });

          placeholderCell.appendChild(showBtn);
          placeholderRow.appendChild(placeholderCell);

          row.style.display = 'none';
          row.parentNode.insertBefore(placeholderRow, row);
        });
      }

      table.style.display = 'table';
    });
  </script>
</body>


</html>
