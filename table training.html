<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Multi-Language Translation Table</title>
  <link rel="stylesheet" href="style.css">
  <style>
  

  table {
    border-collapse: collapse;
    width: 100%;
    margin-top: 20px;
    table-layout: auto; /* ÙŠØ³Ù…Ø­ Ù„Ù„Ø£Ø¹Ù…Ø¯Ø© Ø¨Ø§Ù„ØªÙƒÙŠÙ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ */
  }

  th, td {
    border: 1px solid #ccc;
    padding: 8px;
    text-align: left;
    white-space: nowrap;       /* Ù…Ù†Ø¹ ÙƒØ³Ø± Ø§Ù„Ø³Ø·Ø± Ø¯Ø§Ø®Ù„ Ø§Ù„Ø®Ù„ÙŠØ© */
    overflow: hidden;
    text-overflow: ellipsis;   /* Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù†Ù‚Ø§Ø· Ø¹Ù†Ø¯ ØªØ¬Ø§ÙˆØ² Ø§Ù„Ù†Øµ */
  }

  th:first-child,
  td:first-child {
    width: 1%;               /* Ø£ØµØºØ± Ø¹Ø±Ø¶ Ù…Ù…ÙƒÙ† Ù„Ù„Ø¹Ù…ÙˆØ¯ */
    white-space: nowrap;
    text-align: center;
  }

table select,
table button {
  margin: 5px 0;
  display: block;
  width: 100%;
  max-width: 300px;
}
  input[type="text"] {
    width: 100px;
      }
  </style>
</head>
<body>
  <div class="container">
    <button onclick="location.href='index.html'">ğŸ”™ Back to the homepage</button>

    <h2>Translation Table</h2>

    <label>Select Topic:</label>
    <select id="topicDropdown"><option value="">--Select--</option></select>

    <label>Select Level:</label>
    <select id="levelDropdown" disabled>
      <option value="">--Select--</option>
      <option value="A">A</option>
      <option value="B">B</option>
      <option value="C">C</option>
      <option value="A+B">A+B</option>
      <option value="A+C">A+C</option>
      <option value="B+C">B+C</option>
      <option value="ALL">ALL</option>
    </select>

    <label>Select Your Language:</label>
    <select id="fromLangDropdown"><option value="">--Select--</option></select>

    <label>Select Translation Language 1 (required):</label>
    <select id="toLangDropdown1"><option value="">--Select--</option></select>

    <label>Select Translation Language 2 (optional):</label>
    <select id="toLangDropdown2"><option value="">--Select--</option></select>

    <label>Select Translation Language 3 (optional):</label>
    <select id="toLangDropdown3"><option value="">--Select--</option></select>

    <label>Select Translation Language 4 (optional):</label>
    <select id="toLangDropdown4"><option value="">--Select--</option></select>

    <button id="showTableBtn" disabled>Show Table</button>

    <table id="translationTable" style="display:none;">
      <thead>
        <tr id="tableHeadRow">
          <th>#</th>
          <th></th>
          <th>Word (Your Language)</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <script>
    let jsonData = {};
    let selectedTopic = '';
    let availableLanguages = [];
    let selectedLevel = '';

    const topicDropdown = document.getElementById('topicDropdown');
    const levelDropdown = document.getElementById('levelDropdown');
    const fromLangDropdown = document.getElementById('fromLangDropdown');
    const toLangDropdown1 = document.getElementById('toLangDropdown1');
    const toLangDropdown2 = document.getElementById('toLangDropdown2');
    const toLangDropdown3 = document.getElementById('toLangDropdown3');
    const toLangDropdown4 = document.getElementById('toLangDropdown4');
    const showTableBtn = document.getElementById('showTableBtn');

    fetch('vocab-l.json')
      .then(res => res.json())
      .then(data => {
        jsonData = data;
        for (const topic in data) {
          const opt = document.createElement('option');
          opt.value = topic;
          opt.textContent = topic;
          topicDropdown.appendChild(opt);
        }
      });

    topicDropdown.addEventListener('change', function () {
      selectedTopic = this.value;
      selectedLevel = '';
      levelDropdown.disabled = !selectedTopic;
      levelDropdown.selectedIndex = 0;

      const dropdowns = [fromLangDropdown, toLangDropdown1, toLangDropdown2, toLangDropdown3, toLangDropdown4];
      dropdowns.forEach(dropdown => dropdown.innerHTML = '<option value="">--Select--</option>');
      showTableBtn.disabled = true;

      if (!selectedTopic) return;
    });

    levelDropdown.addEventListener('change', function () {
      selectedLevel = this.value;

      const dropdowns = [fromLangDropdown, toLangDropdown1, toLangDropdown2, toLangDropdown3, toLangDropdown4];
      dropdowns.forEach(dropdown => dropdown.innerHTML = '<option value="">--Select--</option>');
      showTableBtn.disabled = true;

      if (!selectedTopic || !selectedLevel) return;

      // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø£ÙˆÙ„ Ù…Ø³ØªÙˆÙ‰ Ù…ØªØ§Ø­ Ù„Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ù„ØºØ§Øª
      let firstEntry;
      if (selectedLevel === "ALL") {
        const allLevels = Object.keys(jsonData[selectedTopic]);
        for (const lvl of allLevels) {
          const entries = Object.values(jsonData[selectedTopic][lvl]);
          if (entries && entries.length > 0) {
            firstEntry = entries[0];
            break;
          }
        }
      } else {
        const levels = selectedLevel.split('+');
        const firstLevel = levels[0];
        const entries = Object.values(jsonData[selectedTopic][firstLevel]);
        firstEntry = entries && entries[0];
      }

      if (!firstEntry) return;
      availableLanguages = Object.keys(firstEntry).concat("english");

      dropdowns.forEach(dropdown => {
        availableLanguages.forEach(lang => {
          const opt = document.createElement('option');
          opt.value = lang;
          opt.textContent = lang;
          dropdown.appendChild(opt.cloneNode(true));
        });
      });
    });

    function checkEnable() {
      if (topicDropdown.value && levelDropdown.value && fromLangDropdown.value && toLangDropdown1.value) {
        showTableBtn.disabled = false;
      } else {
        showTableBtn.disabled = true;
      }
    }

    fromLangDropdown.addEventListener('change', checkEnable);
    toLangDropdown1.addEventListener('change', checkEnable);

    showTableBtn.addEventListener('click', function () {
      const fromLang = fromLangDropdown.value;
      const toLangs = [
        toLangDropdown1.value,
        toLangDropdown2.value,
        toLangDropdown3.value,
        toLangDropdown4.value
      ].filter(Boolean);

      const table = document.getElementById('translationTable');
      const tableHeadRow = document.getElementById('tableHeadRow');
      const tableBody = document.querySelector('#translationTable tbody');

      // ØªØ¹Ø¯ÙŠÙ„ Ø±Ø£Ø³ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø¨Ø­ÙŠØ« ÙŠÙƒÙˆÙ† Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ø±Ù‚Ù… ÙˆØ§Ù„Ø«Ø§Ù†ÙŠ Ø²Ø± Ø§Ù„Ø¥Ø®ÙØ§Ø¡
      tableHeadRow.innerHTML = '<th>#</th><th></th><th>Word (Your Language)</th>';
      tableBody.innerHTML = '';

      toLangs.forEach(lang => {
        const th = document.createElement('th');
        th.textContent = `Translation (${lang})`;
        tableHeadRow.appendChild(th);
      });

      let selectedLevels = [];
      if (selectedLevel === "ALL") {
        selectedLevels = Object.keys(jsonData[selectedTopic]);
      } else {
        selectedLevels = selectedLevel.split('+');
      }

      let wordCounter = 1; // Ø¹Ø¯Ø§Ø¯ Ø§Ù„ÙƒÙ„Ù…Ø§Øª

      selectedLevels.forEach(level => {
        if (!jsonData[selectedTopic][level]) return;

        for (const [englishWord, translations] of Object.entries(jsonData[selectedTopic][level])) {
          const row = document.createElement('tr');

          // Ø§Ù„Ø¹Ù…ÙˆØ¯ 1: Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ØªØ³Ù„Ø³Ù„ÙŠ
          const numberCell = document.createElement('td');
          numberCell.textContent = wordCounter++;
          row.appendChild(numberCell);

          // Ø§Ù„Ø¹Ù…ÙˆØ¯ 2: Ø²Ø± Ø§Ù„Ø¥Ø®ÙØ§Ø¡
          const toggleCell = document.createElement('td');
          const toggleBtn = document.createElement('button');
          toggleBtn.textContent = 'âˆ’';
          toggleBtn.className = 'toggle-row-btn';
          toggleCell.appendChild(toggleBtn);
          row.appendChild(toggleCell);

          // Ø¯Ø§Ù„Ø© Ø¥Ù†Ø´Ø§Ø¡ Ø®Ù„ÙŠØ© Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø¥Ø®ÙØ§Ø¡
          function createHideableCell(word) {
            const cell = document.createElement('td');
            const span = document.createElement('span');
            span.textContent = word;

            const hideBtn = document.createElement('button');
            hideBtn.textContent = 'Ø¥Ø®ÙØ§Ø¡';
            hideBtn.style.marginLeft = '10px';

            cell.appendChild(span);
            cell.appendChild(hideBtn);

            hideBtn.addEventListener('click', function () {
              cell.innerHTML = '';

              const input = document.createElement('input');
              input.type = 'text';
              input.placeholder = 'Ø§ÙƒØªØ¨ Ø§Ù„ÙƒÙ„Ù…Ø©';

              const checkBtn = document.createElement('button');
              checkBtn.textContent = 'Ù†ÙØ°';

              const result = document.createElement('span');
              result.style.marginLeft = '10px';

              checkBtn.addEventListener('click', function () {
                if (input.value.trim() === word) {
                  result.textContent = 'Correct';
                  result.style.color = 'green';
                } else {
                  result.textContent = 'False';
                  result.style.color = 'red';
                }

                setTimeout(() => {
                  cell.innerHTML = '';
                  cell.appendChild(span);
                  cell.appendChild(hideBtn);
                }, 1500);
              });

              cell.appendChild(input);
              cell.appendChild(checkBtn);
              cell.appendChild(result);
            });

            return cell;
          }

          const fromWord = (fromLang === 'english') ? englishWord : translations[fromLang] || '-';
          row.appendChild(createHideableCell(fromWord));

          toLangs.forEach(lang => {
            const word = (lang === 'english') ? englishWord : translations[lang] || '-';
            row.appendChild(createHideableCell(word));
          });

          tableBody.appendChild(row);

          toggleBtn.addEventListener('click', function () {
            const placeholderRow = document.createElement('tr');
            const placeholderCell = document.createElement('td');
            placeholderCell.colSpan = toLangs.length + 3;

            const showBtn = document.createElement('button');
            showBtn.textContent = '+';
            showBtn.className = 'toggle-row-btn';

            showBtn.addEventListener('click', function () {
              row.style.display = '';
              placeholderRow.remove();
            });

            placeholderCell.appendChild(showBtn);
            placeholderRow.appendChild(placeholderCell);

            row.style.display = 'none';
            row.parentNode.insertBefore(placeholderRow, row);
          });
        }
      });

      table.style.display = 'table';
    });
  </script>
</body>



</html>
